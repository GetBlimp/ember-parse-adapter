var ParseConnector=Ember.Mixin.create({applicationId:null,javascriptId:null,restApiId:null,serverUrl:"https://api.parse.com",versionPath:"1",modelPath:"classes",requestHeaders:function(){if(!this.applicationId||!this.restApiId)throw"Hey! You forgot to set your Parse Account info! https://parse.com/apps/";return{"X-Parse-Application-Id":this.applicationId,"X-Parse-REST-API-Key":this.restApiId}},xDomainRequest:function(e,t,n,r,i){var s=new XDomainRequest;e!=="POST"&&(n._method=e,e="POST"),n._ApplicationId=this.applicationId,n._JavaScriptKey=this.javascriptId,n=JSON.stringify(n),s.onload=function(){var e;try{e=JSON.parse(s.responseText)}catch(t){i&&i(s)}e&&r&&r(e,s)},s.onerror=s.ontimeout=function(){i&&i(s)},s.onprogress=function(){},s.open(e,t),s.send(n)},ajax:function(e,t,n,r,i){if(typeof XDomainRequest!="undefined")return this.xDomainRequest(e,t,n,r,i);var s={url:t,type:e,headers:this.requestHeaders(),success:r,error:i,contentType:"text/plain"};return e!=="GET"&&e!=="DELETE"&&$.extend(s,{data:JSON.stringify(n)}),jQuery.ajax(s)},request:function(e,t,n,r,i){Ember.typeOf(n)==="object"&&(i=r,r=n,n=null),Ember.typeOf(r)==="object"&&!i&&(i=r,r={}),this.ajax(e,this.buildUrl(t,n),this.encodeDataTypes(r),i.success,i.error)},buildUrl:function(e,t){var n="%@/%@/%@/%@".fmt(this.serverUrl,this.versionPath,this.modelPath,e);return t&&(n+="/"+t),n},encodeDataTypes:function(e){return e}}),ParseJSONSerializer=DS.JSONSerializer.extend({primaryKey:function(){return"objectId"}}),ParseJSONTransforms={emberDate:DS.JSONTransforms.date,isoDate:{deserialize:DS.JSONTransforms.date.deserialize,serialize:function(e){return e instanceof Date?e.toISOString():e===undefined?undefined:null}}};DS.JSONTransforms.date={deserialize:ParseJSONTransforms.isoDate.deserialize,serialize:ParseJSONTransforms.isoDate.serialize};var ParseAdapter=DS.Adapter.extend(ParseConnector,{serializer:ParseJSONSerializer,getTypeName:function(e){if(e.parseType)return e.parseType;var t=e.toString().split(".");return t[t.length-1]},find:function(e,t,n){var r=this.getTypeName(t);this.request("GET",r,n,{success:function(r){e.load(t,n,r)},error:function(e){Ember.Logger.error("Adapter::find::error",e)}})},createRecord:function(e,t,n){var r=this.getTypeName(t),i=this.serialize(n,{includeId:!0});this.request("POST",r,i,{success:function(t){$.extend(i,t),e.didSaveRecord(n,i)},error:function(e){Ember.Logger.error("Adapter::createRecord::error",e)}})},updateRecord:function(e,t,n){var r=this.getTypeName(t),i=this.serialize(n,{includeId:!0});this.request("PUT",r,i.objectId,i,{success:function(t){$.extend(i,t),e.didSaveRecord(n,i)},error:function(e){Ember.Logger.error("Adapter::updateRecord::error",e)}})},deleteRecord:function(e,t,n){var r=this.getTypeName(t),i=this.serialize(n,{includeId:!0});this.request("DELETE",r,i.objectId,{success:function(t){$.extend(i,t),e.didSaveRecord(n,i)},error:function(e){Ember.Logger.error("Adapter::deleteRecord::error",e)}})}}),ParseMixin=Ember.Mixin.create({createdAt:DS.attr("date"),updatedAt:DS.attr("date")});